!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("trtc-js-sdk")):"function"==typeof define&&define.amd?define(["trtc-js-sdk"],e):(t=t||self).RTCBeautyPlugin=e(t.TRTC)}(this,(function(t){t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function r(t,e){return t(e={exports:{}},e.exports),e.exports}var n=function(t){return t&&t.Math==Math&&t},o=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||function(){return this}()||Function("return this")(),i=function(t){try{return!!t()}catch(e){return!0}},a=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),u={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,l={f:s&&!u.call({1:2},1)?function(t){var e=s(this,t);return!!e&&e.enumerable}:u},c=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},f={}.toString,h=function(t){return f.call(t).slice(8,-1)},v="".split,p=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==h(t)?v.call(t,""):Object(t)}:Object,g=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},d=function(t){return p(g(t))},y=function(t){return"object"==typeof t?null!==t:"function"==typeof t},b=function(t,e){if(!y(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!y(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!y(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!y(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")},x={}.hasOwnProperty,m=function(t,e){return x.call(t,e)},T=o.document,A=y(T)&&y(T.createElement),E=function(t){return A?T.createElement(t):{}},S=!a&&!i((function(){return 7!=Object.defineProperty(E("div"),"a",{get:function(){return 7}}).a})),w=Object.getOwnPropertyDescriptor,C={f:a?w:function(t,e){if(t=d(t),e=b(e,!0),S)try{return w(t,e)}catch(r){}if(m(t,e))return c(!l.f.call(t,e),t[e])}},_=function(t){if(!y(t))throw TypeError(String(t)+" is not an object");return t},O=Object.defineProperty,R={f:a?O:function(t,e,r){if(_(t),e=b(e,!0),_(r),S)try{return O(t,e,r)}catch(n){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},I=a?function(t,e,r){return R.f(t,e,c(1,r))}:function(t,e,r){return t[e]=r,t},P=function(t,e){try{I(o,t,e)}catch(r){o[t]=e}return e},D=o["__core-js_shared__"]||P("__core-js_shared__",{}),M=Function.toString;"function"!=typeof D.inspectSource&&(D.inspectSource=function(t){return M.call(t)});var U,L,k,j=D.inspectSource,F=o.WeakMap,B="function"==typeof F&&/native code/.test(j(F)),N=r((function(t){(t.exports=function(t,e){return D[t]||(D[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.1",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})})),V=0,G=Math.random(),W=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++V+G).toString(36)},Y=N("keys"),z=function(t){return Y[t]||(Y[t]=W(t))},X={},$=o.WeakMap;if(B){var K=D.state||(D.state=new $),H=K.get,q=K.has,Q=K.set;U=function(t,e){return e.facade=t,Q.call(K,t,e),e},L=function(t){return H.call(K,t)||{}},k=function(t){return q.call(K,t)}}else{var J=z("state");X[J]=!0,U=function(t,e){return e.facade=t,I(t,J,e),e},L=function(t){return m(t,J)?t[J]:{}},k=function(t){return m(t,J)}}var Z,tt,et={set:U,get:L,has:k,enforce:function(t){return k(t)?L(t):U(t,{})},getterFor:function(t){return function(e){var r;if(!y(e)||(r=L(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return r}}},rt=r((function(t){var e=et.get,r=et.enforce,n=String(String).split("String");(t.exports=function(t,e,i,a){var u,s=!!a&&!!a.unsafe,l=!!a&&!!a.enumerable,c=!!a&&!!a.noTargetGet;"function"==typeof i&&("string"!=typeof e||m(i,"name")||I(i,"name",e),(u=r(i)).source||(u.source=n.join("string"==typeof e?e:""))),t!==o?(s?!c&&t[e]&&(l=!0):delete t[e],l?t[e]=i:I(t,e,i)):l?t[e]=i:P(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||j(this)}))})),nt=o,ot=function(t){return"function"==typeof t?t:void 0},it=function(t,e){return arguments.length<2?ot(nt[t])||ot(o[t]):nt[t]&&nt[t][e]||o[t]&&o[t][e]},at=Math.ceil,ut=Math.floor,st=function(t){return isNaN(t=+t)?0:(t>0?ut:at)(t)},lt=Math.min,ct=function(t){return t>0?lt(st(t),9007199254740991):0},ft=Math.max,ht=Math.min,vt=function(t,e){var r=st(t);return r<0?ft(r+e,0):ht(r,e)},pt=function(t){return function(e,r,n){var o,i=d(e),a=ct(i.length),u=vt(n,a);if(t&&r!=r){for(;a>u;)if((o=i[u++])!=o)return!0}else for(;a>u;u++)if((t||u in i)&&i[u]===r)return t||u||0;return!t&&-1}},gt={includes:pt(!0),indexOf:pt(!1)},dt=gt.indexOf,yt=function(t,e){var r,n=d(t),o=0,i=[];for(r in n)!m(X,r)&&m(n,r)&&i.push(r);for(;e.length>o;)m(n,r=e[o++])&&(~dt(i,r)||i.push(r));return i},bt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],xt=bt.concat("length","prototype"),mt={f:Object.getOwnPropertyNames||function(t){return yt(t,xt)}},Tt={f:Object.getOwnPropertySymbols},At=it("Reflect","ownKeys")||function(t){var e=mt.f(_(t)),r=Tt.f;return r?e.concat(r(t)):e},Et=function(t,e){for(var r=At(e),n=R.f,o=C.f,i=0;i<r.length;i++){var a=r[i];m(t,a)||n(t,a,o(e,a))}},St=/#|\.prototype\./,wt=function(t,e){var r=_t[Ct(t)];return r==Rt||r!=Ot&&("function"==typeof e?i(e):!!e)},Ct=wt.normalize=function(t){return String(t).replace(St,".").toLowerCase()},_t=wt.data={},Ot=wt.NATIVE="N",Rt=wt.POLYFILL="P",It=wt,Pt=C.f,Dt=function(t,e){var r,n,i,a,u,s=t.target,l=t.global,c=t.stat;if(r=l?o:c?o[s]||P(s,{}):(o[s]||{}).prototype)for(n in e){if(a=e[n],i=t.noTargetGet?(u=Pt(r,n))&&u.value:r[n],!It(l?n:s+(c?".":"#")+n,t.forced)&&void 0!==i){if(typeof a==typeof i)continue;Et(a,i)}(t.sham||i&&i.sham)&&I(a,"sham",!0),rt(r,n,a,t)}},Mt=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},Ut=function(t,e,r){if(Mt(t),void 0===e)return t;switch(r){case 0:return function(){return t.call(e)};case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,o){return t.call(e,r,n,o)}}return function(){return t.apply(e,arguments)}},Lt=function(t){return Object(g(t))},kt=Array.isArray||function(t){return"Array"==h(t)},jt=!!Object.getOwnPropertySymbols&&!i((function(){return!String(Symbol())})),Ft=jt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Bt=N("wks"),Nt=o.Symbol,Vt=Ft?Nt:Nt&&Nt.withoutSetter||W,Gt=function(t){return m(Bt,t)||(jt&&m(Nt,t)?Bt[t]=Nt[t]:Bt[t]=Vt("Symbol."+t)),Bt[t]},Wt=Gt("species"),Yt=function(t,e){var r;return kt(t)&&("function"!=typeof(r=t.constructor)||r!==Array&&!kt(r.prototype)?y(r)&&null===(r=r[Wt])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===e?0:e)},zt=[].push,Xt=function(t){var e=1==t,r=2==t,n=3==t,o=4==t,i=6==t,a=7==t,u=5==t||i;return function(s,l,c,f){for(var h,v,g=Lt(s),d=p(g),y=Ut(l,c,3),b=ct(d.length),x=0,m=f||Yt,T=e?m(s,b):r||a?m(s,0):void 0;b>x;x++)if((u||x in d)&&(v=y(h=d[x],x,g),t))if(e)T[x]=v;else if(v)switch(t){case 3:return!0;case 5:return h;case 6:return x;case 2:zt.call(T,h)}else switch(t){case 4:return!1;case 7:zt.call(T,h)}return i?-1:n||o?o:T}},$t={forEach:Xt(0),map:Xt(1),filter:Xt(2),some:Xt(3),every:Xt(4),find:Xt(5),findIndex:Xt(6),filterOut:Xt(7)},Kt=it("navigator","userAgent")||"",Ht=o.process,qt=Ht&&Ht.versions,Qt=qt&&qt.v8;Qt?tt=(Z=Qt.split("."))[0]+Z[1]:Kt&&(!(Z=Kt.match(/Edge\/(\d+)/))||Z[1]>=74)&&(Z=Kt.match(/Chrome\/(\d+)/))&&(tt=Z[1]);var Jt=tt&&+tt,Zt=Gt("species"),te=Object.defineProperty,ee={},re=function(t){throw t},ne=function(t,e){if(m(ee,t))return ee[t];e||(e={});var r=[][t],n=!!m(e,"ACCESSORS")&&e.ACCESSORS,o=m(e,0)?e[0]:re,u=m(e,1)?e[1]:void 0;return ee[t]=!!r&&!i((function(){if(n&&!a)return!0;var t={length:-1};n?te(t,1,{enumerable:!0,get:re}):t[1]=1,r.call(t,o,u)}))},oe=$t.filter,ie=function(t){return Jt>=51||!i((function(){var e=[];return(e.constructor={})[Zt]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}("filter"),ae=ne("filter");Dt({target:"Array",proto:!0,forced:!ie||!ae},{filter:function(t){return oe(this,t,arguments.length>1?arguments[1]:void 0)}});var ue,se=Object.keys||function(t){return yt(t,bt)},le=a?Object.defineProperties:function(t,e){_(t);for(var r,n=se(e),o=n.length,i=0;o>i;)R.f(t,r=n[i++],e[r]);return t},ce=it("document","documentElement"),fe=z("IE_PROTO"),he=function(){},ve=function(t){return"<script>"+t+"<\/script>"},pe=function(){try{ue=document.domain&&new ActiveXObject("htmlfile")}catch(n){}var t,e;pe=ue?function(t){t.write(ve("")),t.close();var e=t.parentWindow.Object;return t=null,e}(ue):((e=E("iframe")).style.display="none",ce.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(ve("document.F=Object")),t.close(),t.F);for(var r=bt.length;r--;)delete pe.prototype[bt[r]];return pe()};X[fe]=!0;var ge=Object.create||function(t,e){var r;return null!==t?(he.prototype=_(t),r=new he,he.prototype=null,r[fe]=t):r=pe(),void 0===e?r:le(r,e)},de=Gt("unscopables"),ye=Array.prototype;null==ye[de]&&R.f(ye,de,{configurable:!0,value:ge(null)});var be,xe,me,Te=function(t){ye[de][t]=!0},Ae={},Ee=!i((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Se=z("IE_PROTO"),we=Object.prototype,Ce=Ee?Object.getPrototypeOf:function(t){return t=Lt(t),m(t,Se)?t[Se]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?we:null},_e=Gt("iterator"),Oe=!1;[].keys&&("next"in(me=[].keys())?(xe=Ce(Ce(me)))!==Object.prototype&&(be=xe):Oe=!0),null==be&&(be={}),m(be,_e)||I(be,_e,(function(){return this}));var Re={IteratorPrototype:be,BUGGY_SAFARI_ITERATORS:Oe},Ie=R.f,Pe=Gt("toStringTag"),De=function(t,e,r){t&&!m(t=r?t:t.prototype,Pe)&&Ie(t,Pe,{configurable:!0,value:e})},Me=Re.IteratorPrototype,Ue=function(){return this},Le=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),e=r instanceof Array}catch(n){}return function(r,n){return _(r),function(t){if(!y(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(n),e?t.call(r,n):r.__proto__=n,r}}():void 0),ke=Re.IteratorPrototype,je=Re.BUGGY_SAFARI_ITERATORS,Fe=Gt("iterator"),Be=function(){return this},Ne=function(t,e,r,n,o,i,a){!function(t,e,r){var n=e+" Iterator";t.prototype=ge(Me,{next:c(1,r)}),De(t,n,!1),Ae[n]=Ue}(r,e,n);var u,s,l,f=function(t){if(t===o&&d)return d;if(!je&&t in p)return p[t];switch(t){case"keys":case"values":case"entries":return function(){return new r(this,t)}}return function(){return new r(this)}},h=e+" Iterator",v=!1,p=t.prototype,g=p[Fe]||p["@@iterator"]||o&&p[o],d=!je&&g||f(o),y="Array"==e&&p.entries||g;if(y&&(u=Ce(y.call(new t)),ke!==Object.prototype&&u.next&&(Ce(u)!==ke&&(Le?Le(u,ke):"function"!=typeof u[Fe]&&I(u,Fe,Be)),De(u,h,!0))),"values"==o&&g&&"values"!==g.name&&(v=!0,d=function(){return g.call(this)}),p[Fe]!==d&&I(p,Fe,d),Ae[e]=d,o)if(s={values:f("values"),keys:i?d:f("keys"),entries:f("entries")},a)for(l in s)(je||v||!(l in p))&&rt(p,l,s[l]);else Dt({target:e,proto:!0,forced:je||v},s);return s},Ve=et.set,Ge=et.getterFor("Array Iterator"),We=Ne(Array,"Array",(function(t,e){Ve(this,{type:"Array Iterator",target:d(t),index:0,kind:e})}),(function(){var t=Ge(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}}),"values");Ae.Arguments=Ae.Array,Te("keys"),Te("values"),Te("entries");var Ye=[].slice,ze={},Xe=function(t,e,r){if(!(e in ze)){for(var n=[],o=0;o<e;o++)n[o]="a["+o+"]";ze[e]=Function("C,a","return new C("+n.join(",")+")")}return ze[e](t,r)},$e=Function.bind||function(t){var e=Mt(this),r=Ye.call(arguments,1),n=function(){var o=r.concat(Ye.call(arguments));return this instanceof n?Xe(e,o.length,o):e.apply(t,o)};return y(e.prototype)&&(n.prototype=e.prototype),n};Dt({target:"Function",proto:!0},{bind:$e});var Ke=!i((function(){return Object.isExtensible(Object.preventExtensions({}))})),He=r((function(t){var e=R.f,r=W("meta"),n=0,o=Object.isExtensible||function(){return!0},i=function(t){e(t,r,{value:{objectID:"O"+ ++n,weakData:{}}})},a=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!y(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!m(t,r)){if(!o(t))return"F";if(!e)return"E";i(t)}return t[r].objectID},getWeakData:function(t,e){if(!m(t,r)){if(!o(t))return!0;if(!e)return!1;i(t)}return t[r].weakData},onFreeze:function(t){return Ke&&a.REQUIRED&&o(t)&&!m(t,r)&&i(t),t}};X[r]=!0})),qe=(He.REQUIRED,He.fastKey,He.getWeakData,He.onFreeze,Gt("iterator")),Qe=Array.prototype,Je=function(t){return void 0!==t&&(Ae.Array===t||Qe[qe]===t)},Ze={};Ze[Gt("toStringTag")]="z";var tr="[object z]"===String(Ze),er=Gt("toStringTag"),rr="Arguments"==h(function(){return arguments}()),nr=tr?h:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(r){}}(e=Object(t),er))?r:rr?h(e):"Object"==(n=h(e))&&"function"==typeof e.callee?"Arguments":n},or=Gt("iterator"),ir=function(t){if(null!=t)return t[or]||t["@@iterator"]||Ae[nr(t)]},ar=function(t){var e=t.return;if(void 0!==e)return _(e.call(t)).value},ur=function(t,e){this.stopped=t,this.result=e},sr=function(t,e,r){var n,o,i,a,u,s,l,c=r&&r.that,f=!(!r||!r.AS_ENTRIES),h=!(!r||!r.IS_ITERATOR),v=!(!r||!r.INTERRUPTED),p=Ut(e,c,1+f+v),g=function(t){return n&&ar(n),new ur(!0,t)},d=function(t){return f?(_(t),v?p(t[0],t[1],g):p(t[0],t[1])):v?p(t,g):p(t)};if(h)n=t;else{if("function"!=typeof(o=ir(t)))throw TypeError("Target is not iterable");if(Je(o)){for(i=0,a=ct(t.length);a>i;i++)if((u=d(t[i]))&&u instanceof ur)return u;return new ur(!1)}n=o.call(t)}for(s=n.next;!(l=s.call(n)).done;){try{u=d(l.value)}catch(y){throw ar(n),y}if("object"==typeof u&&u&&u instanceof ur)return u}return new ur(!1)},lr=function(t,e,r){if(!(t instanceof e))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return t},cr=Gt("iterator"),fr=!1;try{var hr=0,vr={next:function(){return{done:!!hr++}},return:function(){fr=!0}};vr[cr]=function(){return this},Array.from(vr,(function(){throw 2}))}catch(Sa){}var pr=function(t,e){if(!e&&!fr)return!1;var r=!1;try{var n={};n[cr]=function(){return{next:function(){return{done:r=!0}}}},t(n)}catch(Sa){}return r},gr=function(t,e,r){var n,o;return Le&&"function"==typeof(n=e.constructor)&&n!==r&&y(o=n.prototype)&&o!==r.prototype&&Le(t,o),t},dr=function(t,e,r){for(var n in e)rt(t,n,e[n],r);return t},yr=Gt("species"),br=function(t){var e=it(t),r=R.f;a&&e&&!e[yr]&&r(e,yr,{configurable:!0,get:function(){return this}})},xr=R.f,mr=He.fastKey,Tr=et.set,Ar=et.getterFor,Er=(function(t,e,r){var n=-1!==t.indexOf("Map"),a=-1!==t.indexOf("Weak"),u=n?"set":"add",s=o[t],l=s&&s.prototype,c=s,f={},h=function(t){var e=l[t];rt(l,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(a&&!y(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return a&&!y(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(a&&!y(t))&&e.call(this,0===t?0:t)}:function(t,r){return e.call(this,0===t?0:t,r),this})};if(It(t,"function"!=typeof s||!(a||l.forEach&&!i((function(){(new s).entries().next()})))))c=r.getConstructor(e,t,n,u),He.REQUIRED=!0;else if(It(t,!0)){var v=new c,p=v[u](a?{}:-0,1)!=v,g=i((function(){v.has(1)})),d=pr((function(t){new s(t)})),b=!a&&i((function(){for(var t=new s,e=5;e--;)t[u](e,e);return!t.has(-0)}));d||((c=e((function(e,r){lr(e,c,t);var o=gr(new s,e,c);return null!=r&&sr(r,o[u],{that:o,AS_ENTRIES:n}),o}))).prototype=l,l.constructor=c),(g||b)&&(h("delete"),h("has"),n&&h("get")),(b||p)&&h(u),a&&l.clear&&delete l.clear}f[t]=c,Dt({global:!0,forced:c!=s},f),De(c,t),a||r.setStrong(c,t,n)}("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),{getConstructor:function(t,e,r,n){var o=t((function(t,i){lr(t,o,e),Tr(t,{type:e,index:ge(null),first:void 0,last:void 0,size:0}),a||(t.size=0),null!=i&&sr(i,t[n],{that:t,AS_ENTRIES:r})})),i=Ar(e),u=function(t,e,r){var n,o,u=i(t),l=s(t,e);return l?l.value=r:(u.last=l={index:o=mr(e,!0),key:e,value:r,previous:n=u.last,next:void 0,removed:!1},u.first||(u.first=l),n&&(n.next=l),a?u.size++:t.size++,"F"!==o&&(u.index[o]=l)),t},s=function(t,e){var r,n=i(t),o=mr(e);if("F"!==o)return n.index[o];for(r=n.first;r;r=r.next)if(r.key==e)return r};return dr(o.prototype,{clear:function(){for(var t=i(this),e=t.index,r=t.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete e[r.index],r=r.next;t.first=t.last=void 0,a?t.size=0:this.size=0},delete:function(t){var e=i(this),r=s(this,t);if(r){var n=r.next,o=r.previous;delete e.index[r.index],r.removed=!0,o&&(o.next=n),n&&(n.previous=o),e.first==r&&(e.first=n),e.last==r&&(e.last=o),a?e.size--:this.size--}return!!r},forEach:function(t){for(var e,r=i(this),n=Ut(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:r.first;)for(n(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!s(this,t)}}),dr(o.prototype,r?{get:function(t){var e=s(this,t);return e&&e.value},set:function(t,e){return u(this,0===t?0:t,e)}}:{add:function(t){return u(this,t=0===t?0:t,t)}}),a&&xr(o.prototype,"size",{get:function(){return i(this).size}}),o},setStrong:function(t,e,r){var n=e+" Iterator",o=Ar(e),i=Ar(n);Ne(t,e,(function(t,e){Tr(this,{type:n,target:t,state:o(t),kind:e,last:void 0})}),(function(){for(var t=i(this),e=t.kind,r=t.last;r&&r.removed;)r=r.previous;return t.target&&(t.last=r=r?r.next:t.state.first)?"keys"==e?{value:r.key,done:!1}:"values"==e?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),br(e)}}),tr?{}.toString:function(){return"[object "+nr(this)+"]"});tr||rt(Object.prototype,"toString",Er,{unsafe:!0});var Sr=function(t){return function(e,r){var n,o,i=String(g(e)),a=st(r),u=i.length;return a<0||a>=u?t?"":void 0:(n=i.charCodeAt(a))<55296||n>56319||a+1===u||(o=i.charCodeAt(a+1))<56320||o>57343?t?i.charAt(a):n:t?i.slice(a,a+2):o-56320+(n-55296<<10)+65536}},wr={codeAt:Sr(!1),charAt:Sr(!0)},Cr=wr.charAt,_r=et.set,Or=et.getterFor("String Iterator");Ne(String,"String",(function(t){_r(this,{type:"String Iterator",string:String(t),index:0})}),(function(){var t,e=Or(this),r=e.string,n=e.index;return n>=r.length?{value:void 0,done:!0}:(t=Cr(r,n),e.index+=t.length,{value:t,done:!1})}));var Rr={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Ir=Gt("iterator"),Pr=Gt("toStringTag"),Dr=We.values;for(var Mr in Rr){var Ur=o[Mr],Lr=Ur&&Ur.prototype;if(Lr){if(Lr[Ir]!==Dr)try{I(Lr,Ir,Dr)}catch(Sa){Lr[Ir]=Dr}if(Lr[Pr]||I(Lr,Pr,Mr),Rr[Mr])for(var kr in We)if(Lr[kr]!==We[kr])try{I(Lr,kr,We[kr])}catch(Sa){Lr[kr]=We[kr]}}}function jr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Br(t,e,r){return e&&Fr(t.prototype,e),r&&Fr(t,r),t}var Nr="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,Vr=function(t){if(void 0===t)return 0;var e=st(t),r=ct(e);if(e!==r)throw RangeError("Wrong length or index");return r},Gr=Math.abs,Wr=Math.pow,Yr=Math.floor,zr=Math.log,Xr=Math.LN2,$r=function(t,e,r){var n,o,i,a=new Array(r),u=8*r-e-1,s=(1<<u)-1,l=s>>1,c=23===e?Wr(2,-24)-Wr(2,-77):0,f=t<0||0===t&&1/t<0?1:0,h=0;for((t=Gr(t))!=t||t===1/0?(o=t!=t?1:0,n=s):(n=Yr(zr(t)/Xr),t*(i=Wr(2,-n))<1&&(n--,i*=2),(t+=n+l>=1?c/i:c*Wr(2,1-l))*i>=2&&(n++,i/=2),n+l>=s?(o=0,n=s):n+l>=1?(o=(t*i-1)*Wr(2,e),n+=l):(o=t*Wr(2,l-1)*Wr(2,e),n=0));e>=8;a[h++]=255&o,o/=256,e-=8);for(n=n<<e|o,u+=e;u>0;a[h++]=255&n,n/=256,u-=8);return a[--h]|=128*f,a},Kr=function(t,e){var r,n=t.length,o=8*n-e-1,i=(1<<o)-1,a=i>>1,u=o-7,s=n-1,l=t[s--],c=127&l;for(l>>=7;u>0;c=256*c+t[s],s--,u-=8);for(r=c&(1<<-u)-1,c>>=-u,u+=e;u>0;r=256*r+t[s],s--,u-=8);if(0===c)c=1-a;else{if(c===i)return r?NaN:l?-1/0:1/0;r+=Wr(2,e),c-=a}return(l?-1:1)*r*Wr(2,c-e)},Hr=function(t){for(var e=Lt(this),r=ct(e.length),n=arguments.length,o=vt(n>1?arguments[1]:void 0,r),i=n>2?arguments[2]:void 0,a=void 0===i?r:vt(i,r);a>o;)e[o++]=t;return e},qr=mt.f,Qr=R.f,Jr=et.get,Zr=et.set,tn=o.ArrayBuffer,en=tn,rn=o.DataView,nn=rn&&rn.prototype,on=Object.prototype,an=o.RangeError,un=$r,sn=Kr,ln=function(t){return[255&t]},cn=function(t){return[255&t,t>>8&255]},fn=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},hn=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},vn=function(t){return un(t,23,4)},pn=function(t){return un(t,52,8)},gn=function(t,e){Qr(t.prototype,e,{get:function(){return Jr(this)[e]}})},dn=function(t,e,r,n){var o=Vr(r),i=Jr(t);if(o+e>i.byteLength)throw an("Wrong index");var a=Jr(i.buffer).bytes,u=o+i.byteOffset,s=a.slice(u,u+e);return n?s:s.reverse()},yn=function(t,e,r,n,o,i){var a=Vr(r),u=Jr(t);if(a+e>u.byteLength)throw an("Wrong index");for(var s=Jr(u.buffer).bytes,l=a+u.byteOffset,c=n(+o),f=0;f<e;f++)s[l+f]=c[i?f:e-f-1]};if(Nr){if(!i((function(){tn(1)}))||!i((function(){new tn(-1)}))||i((function(){return new tn,new tn(1.5),new tn(NaN),"ArrayBuffer"!=tn.name}))){for(var bn,xn=(en=function(t){return lr(this,en),new tn(Vr(t))}).prototype=tn.prototype,mn=qr(tn),Tn=0;mn.length>Tn;)(bn=mn[Tn++])in en||I(en,bn,tn[bn]);xn.constructor=en}Le&&Ce(nn)!==on&&Le(nn,on);var An=new rn(new en(2)),En=nn.setInt8;An.setInt8(0,2147483648),An.setInt8(1,2147483649),!An.getInt8(0)&&An.getInt8(1)||dr(nn,{setInt8:function(t,e){En.call(this,t,e<<24>>24)},setUint8:function(t,e){En.call(this,t,e<<24>>24)}},{unsafe:!0})}else en=function(t){lr(this,en,"ArrayBuffer");var e=Vr(t);Zr(this,{bytes:Hr.call(new Array(e),0),byteLength:e}),a||(this.byteLength=e)},rn=function(t,e,r){lr(this,rn,"DataView"),lr(t,en,"DataView");var n=Jr(t).byteLength,o=st(e);if(o<0||o>n)throw an("Wrong offset");if(o+(r=void 0===r?n-o:ct(r))>n)throw an("Wrong length");Zr(this,{buffer:t,byteLength:r,byteOffset:o}),a||(this.buffer=t,this.byteLength=r,this.byteOffset=o)},a&&(gn(en,"byteLength"),gn(rn,"buffer"),gn(rn,"byteLength"),gn(rn,"byteOffset")),dr(rn.prototype,{getInt8:function(t){return dn(this,1,t)[0]<<24>>24},getUint8:function(t){return dn(this,1,t)[0]},getInt16:function(t){var e=dn(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=dn(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return hn(dn(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return hn(dn(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return sn(dn(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return sn(dn(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){yn(this,1,t,ln,e)},setUint8:function(t,e){yn(this,1,t,ln,e)},setInt16:function(t,e){yn(this,2,t,cn,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){yn(this,2,t,cn,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){yn(this,4,t,fn,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){yn(this,4,t,fn,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){yn(this,4,t,vn,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){yn(this,8,t,pn,e,arguments.length>2?arguments[2]:void 0)}});De(en,"ArrayBuffer"),De(rn,"DataView");var Sn={ArrayBuffer:en,DataView:rn},wn=Gt("species"),Cn=function(t,e){var r,n=_(t).constructor;return void 0===n||null==(r=_(n)[wn])?e:Mt(r)},_n=Sn.ArrayBuffer,On=Sn.DataView,Rn=_n.prototype.slice,In=i((function(){return!new _n(2).slice(1,void 0).byteLength}));Dt({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:In},{slice:function(t,e){if(void 0!==Rn&&void 0===e)return Rn.call(_(this),t);for(var r=_(this).byteLength,n=vt(t,r),o=vt(void 0===e?r:e,r),i=new(Cn(this,_n))(ct(o-n)),a=new On(this),u=new On(i),s=0;n<o;)u.setUint8(s++,a.getUint8(n++));return i}});var Pn,Dn=R.f,Mn=o.Int8Array,Un=Mn&&Mn.prototype,Ln=o.Uint8ClampedArray,kn=Ln&&Ln.prototype,jn=Mn&&Ce(Mn),Fn=Un&&Ce(Un),Bn=Object.prototype,Nn=Bn.isPrototypeOf,Vn=Gt("toStringTag"),Gn=W("TYPED_ARRAY_TAG"),Wn=Nr&&!!Le&&"Opera"!==nr(o.opera),Yn=!1,zn={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Xn={BigInt64Array:8,BigUint64Array:8},$n=function(t){if(!y(t))return!1;var e=nr(t);return m(zn,e)||m(Xn,e)};for(Pn in zn)o[Pn]||(Wn=!1);if((!Wn||"function"!=typeof jn||jn===Function.prototype)&&(jn=function(){throw TypeError("Incorrect invocation")},Wn))for(Pn in zn)o[Pn]&&Le(o[Pn],jn);if((!Wn||!Fn||Fn===Bn)&&(Fn=jn.prototype,Wn))for(Pn in zn)o[Pn]&&Le(o[Pn].prototype,Fn);if(Wn&&Ce(kn)!==Fn&&Le(kn,Fn),a&&!m(Fn,Vn))for(Pn in Yn=!0,Dn(Fn,Vn,{get:function(){return y(this)?this[Gn]:void 0}}),zn)o[Pn]&&I(o[Pn],Gn,Pn);var Kn={NATIVE_ARRAY_BUFFER_VIEWS:Wn,TYPED_ARRAY_TAG:Yn&&Gn,aTypedArray:function(t){if($n(t))return t;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(t){if(Le){if(Nn.call(jn,t))return t}else for(var e in zn)if(m(zn,Pn)){var r=o[e];if(r&&(t===r||Nn.call(r,t)))return t}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(t,e,r){if(a){if(r)for(var n in zn){var i=o[n];i&&m(i.prototype,t)&&delete i.prototype[t]}Fn[t]&&!r||rt(Fn,t,r?e:Wn&&Un[t]||e)}},exportTypedArrayStaticMethod:function(t,e,r){var n,i;if(a){if(Le){if(r)for(n in zn)(i=o[n])&&m(i,t)&&delete i[t];if(jn[t]&&!r)return;try{return rt(jn,t,r?e:Wn&&Mn[t]||e)}catch(Sa){}}for(n in zn)!(i=o[n])||i[t]&&!r||rt(i,t,e)}},isView:function(t){if(!y(t))return!1;var e=nr(t);return"DataView"===e||m(zn,e)||m(Xn,e)},isTypedArray:$n,TypedArray:jn,TypedArrayPrototype:Fn},Hn=Kn.NATIVE_ARRAY_BUFFER_VIEWS,qn=o.ArrayBuffer,Qn=o.Int8Array,Jn=!Hn||!i((function(){Qn(1)}))||!i((function(){new Qn(-1)}))||!pr((function(t){new Qn,new Qn(null),new Qn(1.5),new Qn(t)}),!0)||i((function(){return 1!==new Qn(new qn(2),1,void 0).length})),Zn=function(t,e){var r=function(t){var e=st(t);if(e<0)throw RangeError("The argument can't be less than 0");return e}(t);if(r%e)throw RangeError("Wrong offset");return r},to=Kn.aTypedArrayConstructor,eo=function(t){var e,r,n,o,i,a,u=Lt(t),s=arguments.length,l=s>1?arguments[1]:void 0,c=void 0!==l,f=ir(u);if(null!=f&&!Je(f))for(a=(i=f.call(u)).next,u=[];!(o=a.call(i)).done;)u.push(o.value);for(c&&s>2&&(l=Ut(l,arguments[2],2)),r=ct(u.length),n=new(to(this))(r),e=0;r>e;e++)n[e]=c?l(u[e],e):u[e];return n};r((function(t){var e=mt.f,r=$t.forEach,n=et.get,i=et.set,u=R.f,s=C.f,l=Math.round,f=o.RangeError,h=Sn.ArrayBuffer,v=Sn.DataView,p=Kn.NATIVE_ARRAY_BUFFER_VIEWS,g=Kn.TYPED_ARRAY_TAG,d=Kn.TypedArray,x=Kn.TypedArrayPrototype,T=Kn.aTypedArrayConstructor,A=Kn.isTypedArray,E=function(t,e){for(var r=0,n=e.length,o=new(T(t))(n);n>r;)o[r]=e[r++];return o},S=function(t,e){u(t,e,{get:function(){return n(this)[e]}})},w=function(t){var e;return t instanceof h||"ArrayBuffer"==(e=nr(t))||"SharedArrayBuffer"==e},_=function(t,e){return A(t)&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},O=function(t,e){return _(t,e=b(e,!0))?c(2,t[e]):s(t,e)},P=function(t,e,r){return!(_(t,e=b(e,!0))&&y(r)&&m(r,"value"))||m(r,"get")||m(r,"set")||r.configurable||m(r,"writable")&&!r.writable||m(r,"enumerable")&&!r.enumerable?u(t,e,r):(t[e]=r.value,t)};a?(p||(C.f=O,R.f=P,S(x,"buffer"),S(x,"byteOffset"),S(x,"byteLength"),S(x,"length")),Dt({target:"Object",stat:!0,forced:!p},{getOwnPropertyDescriptor:O,defineProperty:P}),t.exports=function(t,a,s){var c=t.match(/\d+$/)[0]/8,b=t+(s?"Clamped":"")+"Array",m="get"+t,T="set"+t,S=o[b],C=S,_=C&&C.prototype,O={},R=function(t,e){u(t,e,{get:function(){return function(t,e){var r=n(t);return r.view[m](e*c+r.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,r){var o=n(t);s&&(r=(r=l(r))<0?0:r>255?255:255&r),o.view[T](e*c+o.byteOffset,r,!0)}(this,e,t)},enumerable:!0})};p?Jn&&(C=a((function(t,e,r,n){return lr(t,C,b),gr(y(e)?w(e)?void 0!==n?new S(e,Zn(r,c),n):void 0!==r?new S(e,Zn(r,c)):new S(e):A(e)?E(C,e):eo.call(C,e):new S(Vr(e)),t,C)})),Le&&Le(C,d),r(e(S),(function(t){t in C||I(C,t,S[t])})),C.prototype=_):(C=a((function(t,e,r,n){lr(t,C,b);var o,a,u,s=0,l=0;if(y(e)){if(!w(e))return A(e)?E(C,e):eo.call(C,e);o=e,l=Zn(r,c);var p=e.byteLength;if(void 0===n){if(p%c)throw f("Wrong length");if((a=p-l)<0)throw f("Wrong length")}else if((a=ct(n)*c)+l>p)throw f("Wrong length");u=a/c}else u=Vr(e),o=new h(a=u*c);for(i(t,{buffer:o,byteOffset:l,byteLength:a,length:u,view:new v(o)});s<u;)R(t,s++)})),Le&&Le(C,d),_=C.prototype=ge(x)),_.constructor!==C&&I(_,"constructor",C),g&&I(_,g,b),O[b]=C,Dt({global:!0,forced:C!=S,sham:!p},O),"BYTES_PER_ELEMENT"in C||I(C,"BYTES_PER_ELEMENT",c),"BYTES_PER_ELEMENT"in _||I(_,"BYTES_PER_ELEMENT",c),br(b)}):t.exports=function(){}}))("Float32",(function(t){return function(e,r,n){return t(this,e,r,n)}}));var ro=Math.min,no=[].copyWithin||function(t,e){var r=Lt(this),n=ct(r.length),o=vt(t,n),i=vt(e,n),a=arguments.length>2?arguments[2]:void 0,u=ro((void 0===a?n:vt(a,n))-i,n-o),s=1;for(i<o&&o<i+u&&(s=-1,i+=u-1,o+=u-1);u-- >0;)i in r?r[o]=r[i]:delete r[o],o+=s,i+=s;return r},oo=Kn.aTypedArray;(0,Kn.exportTypedArrayMethod)("copyWithin",(function(t,e){return no.call(oo(this),t,e,arguments.length>2?arguments[2]:void 0)}));var io=$t.every,ao=Kn.aTypedArray;(0,Kn.exportTypedArrayMethod)("every",(function(t){return io(ao(this),t,arguments.length>1?arguments[1]:void 0)}));var uo=Kn.aTypedArray;(0,Kn.exportTypedArrayMethod)("fill",(function(t){return Hr.apply(uo(this),arguments)}));var so=$t.filter,lo=Kn.aTypedArray,co=Kn.aTypedArrayConstructor;(0,Kn.exportTypedArrayMethod)("filter",(function(t){for(var e=so(lo(this),t,arguments.length>1?arguments[1]:void 0),r=Cn(this,this.constructor),n=0,o=e.length,i=new(co(r))(o);o>n;)i[n]=e[n++];return i}));var fo=$t.find,ho=Kn.aTypedArray;(0,Kn.exportTypedArrayMethod)("find",(function(t){return fo(ho(this),t,arguments.length>1?arguments[1]:void 0)}));var vo=$t.findIndex,po=Kn.aTypedArray;(0,Kn.exportTypedArrayMethod)("findIndex",(function(t){return vo(po(this),t,arguments.length>1?arguments[1]:void 0)}));var go=$t.forEach,yo=Kn.aTypedArray;(0,Kn.exportTypedArrayMethod)("forEach",(function(t){go(yo(this),t,arguments.length>1?arguments[1]:void 0)}));var bo=gt.includes,xo=Kn.aTypedArray;(0,Kn.exportTypedArrayMethod)("includes",(function(t){return bo(xo(this),t,arguments.length>1?arguments[1]:void 0)}));var mo=gt.indexOf,To=Kn.aTypedArray;(0,Kn.exportTypedArrayMethod)("indexOf",(function(t){return mo(To(this),t,arguments.length>1?arguments[1]:void 0)}));var Ao=Gt("iterator"),Eo=o.Uint8Array,So=We.values,wo=We.keys,Co=We.entries,_o=Kn.aTypedArray,Oo=Kn.exportTypedArrayMethod,Ro=Eo&&Eo.prototype[Ao],Io=!!Ro&&("values"==Ro.name||null==Ro.name),Po=function(){return So.call(_o(this))};Oo("entries",(function(){return Co.call(_o(this))})),Oo("keys",(function(){return wo.call(_o(this))})),Oo("values",Po,!Io),Oo(Ao,Po,!Io);var Do=Kn.aTypedArray,Mo=[].join;(0,Kn.exportTypedArrayMethod)("join",(function(t){return Mo.apply(Do(this),arguments)}));var Uo=function(t,e){var r=[][t];return!!r&&i((function(){r.call(null,e||function(){throw 1},1)}))},Lo=Math.min,ko=[].lastIndexOf,jo=!!ko&&1/[1].lastIndexOf(1,-0)<0,Fo=Uo("lastIndexOf"),Bo=ne("indexOf",{ACCESSORS:!0,1:0}),No=jo||!Fo||!Bo?function(t){if(jo)return ko.apply(this,arguments)||0;var e=d(this),r=ct(e.length),n=r-1;for(arguments.length>1&&(n=Lo(n,st(arguments[1]))),n<0&&(n=r+n);n>=0;n--)if(n in e&&e[n]===t)return n||0;return-1}:ko,Vo=Kn.aTypedArray;(0,Kn.exportTypedArrayMethod)("lastIndexOf",(function(t){return No.apply(Vo(this),arguments)}));var Go=$t.map,Wo=Kn.aTypedArray,Yo=Kn.aTypedArrayConstructor;(0,Kn.exportTypedArrayMethod)("map",(function(t){return Go(Wo(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(Yo(Cn(t,t.constructor)))(e)}))}));var zo=function(t){return function(e,r,n,o){Mt(r);var i=Lt(e),a=p(i),u=ct(i.length),s=t?u-1:0,l=t?-1:1;if(n<2)for(;;){if(s in a){o=a[s],s+=l;break}if(s+=l,t?s<0:u<=s)throw TypeError("Reduce of empty array with no initial value")}for(;t?s>=0:u>s;s+=l)s in a&&(o=r(o,a[s],s,i));return o}},Xo={left:zo(!1),right:zo(!0)},$o=Xo.left,Ko=Kn.aTypedArray;(0,Kn.exportTypedArrayMethod)("reduce",(function(t){return $o(Ko(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}));var Ho=Xo.right,qo=Kn.aTypedArray;(0,Kn.exportTypedArrayMethod)("reduceRight",(function(t){return Ho(qo(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}));var Qo=Kn.aTypedArray,Jo=Kn.exportTypedArrayMethod,Zo=Math.floor;Jo("reverse",(function(){for(var t,e=Qo(this).length,r=Zo(e/2),n=0;n<r;)t=this[n],this[n++]=this[--e],this[e]=t;return this}));var ti=Kn.aTypedArray;(0,Kn.exportTypedArrayMethod)("set",(function(t){ti(this);var e=Zn(arguments.length>1?arguments[1]:void 0,1),r=this.length,n=Lt(t),o=ct(n.length),i=0;if(o+e>r)throw RangeError("Wrong length");for(;i<o;)this[e+i]=n[i++]}),i((function(){new Int8Array(1).set({})})));var ei=Kn.aTypedArray,ri=Kn.aTypedArrayConstructor,ni=[].slice;(0,Kn.exportTypedArrayMethod)("slice",(function(t,e){for(var r=ni.call(ei(this),t,e),n=Cn(this,this.constructor),o=0,i=r.length,a=new(ri(n))(i);i>o;)a[o]=r[o++];return a}),i((function(){new Int8Array(1).slice()})));var oi=$t.some,ii=Kn.aTypedArray;(0,Kn.exportTypedArrayMethod)("some",(function(t){return oi(ii(this),t,arguments.length>1?arguments[1]:void 0)}));var ai=Kn.aTypedArray,ui=[].sort;(0,Kn.exportTypedArrayMethod)("sort",(function(t){return ui.call(ai(this),t)}));var si=Kn.aTypedArray;(0,Kn.exportTypedArrayMethod)("subarray",(function(t,e){var r=si(this),n=r.length,o=vt(t,n);return new(Cn(r,r.constructor))(r.buffer,r.byteOffset+o*r.BYTES_PER_ELEMENT,ct((void 0===e?n:vt(e,n))-o))}));var li=o.Int8Array,ci=Kn.aTypedArray,fi=Kn.exportTypedArrayMethod,hi=[].toLocaleString,vi=[].slice,pi=!!li&&i((function(){hi.call(new li(1))}));fi("toLocaleString",(function(){return hi.apply(pi?vi.call(ci(this)):ci(this),arguments)}),i((function(){return[1,2].toLocaleString()!=new li([1,2]).toLocaleString()}))||!i((function(){li.prototype.toLocaleString.call([1,2])})));var gi=Kn.exportTypedArrayMethod,di=o.Uint8Array,yi=di&&di.prototype||{},bi=[].toString,xi=[].join;i((function(){bi.call({})}))&&(bi=function(){return xi.call(this)});var mi=yi.toString!=bi;gi("toString",bi,mi);var Ti=[].join,Ai=p!=Object,Ei=Uo("join",",");Dt({target:"Array",proto:!0,forced:Ai||!Ei},{join:function(t){return Ti.call(d(this),void 0===t?",":t)}});var Si=Date.prototype,wi=Si.toString,Ci=Si.getTime;new Date(NaN)+""!="Invalid Date"&&rt(Si,"toString",(function(){var t=Ci.call(this);return t==t?wi.call(this):"Invalid Date"}));var _i=Gt("match"),Oi=function(){var t=_(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e};function Ri(t,e){return RegExp(t,e)}var Ii={UNSUPPORTED_Y:i((function(){var t=Ri("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),BROKEN_CARET:i((function(){var t=Ri("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},Pi=R.f,Di=mt.f,Mi=et.set,Ui=Gt("match"),Li=o.RegExp,ki=Li.prototype,ji=/a/g,Fi=/a/g,Bi=new Li(ji)!==ji,Ni=Ii.UNSUPPORTED_Y;if(a&&It("RegExp",!Bi||Ni||i((function(){return Fi[Ui]=!1,Li(ji)!=ji||Li(Fi)==Fi||"/a/i"!=Li(ji,"i")})))){for(var Vi=function(t,e){var r,n,o,i=this instanceof Vi,a=y(r=t)&&(void 0!==(n=r[_i])?!!n:"RegExp"==h(r)),u=void 0===e;if(!i&&a&&t.constructor===Vi&&u)return t;Bi?a&&!u&&(t=t.source):t instanceof Vi&&(u&&(e=Oi.call(t)),t=t.source),Ni&&(o=!!e&&e.indexOf("y")>-1)&&(e=e.replace(/y/g,""));var s=gr(Bi?new Li(t,e):Li(t,e),i?this:ki,Vi);return Ni&&o&&Mi(s,{sticky:o}),s},Gi=function(t){t in Vi||Pi(Vi,t,{configurable:!0,get:function(){return Li[t]},set:function(e){Li[t]=e}})},Wi=Di(Li),Yi=0;Wi.length>Yi;)Gi(Wi[Yi++]);ki.constructor=Vi,Vi.prototype=ki,rt(o,"RegExp",Vi)}br("RegExp");var zi=RegExp.prototype.exec,Xi=String.prototype.replace,$i=zi,Ki=function(){var t=/a/,e=/b*/g;return zi.call(t,"a"),zi.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),Hi=Ii.UNSUPPORTED_Y||Ii.BROKEN_CARET,qi=void 0!==/()??/.exec("")[1];(Ki||qi||Hi)&&($i=function(t){var e,r,n,o,i=this,a=Hi&&i.sticky,u=Oi.call(i),s=i.source,l=0,c=t;return a&&(-1===(u=u.replace("y","")).indexOf("g")&&(u+="g"),c=String(t).slice(i.lastIndex),i.lastIndex>0&&(!i.multiline||i.multiline&&"\n"!==t[i.lastIndex-1])&&(s="(?: "+s+")",c=" "+c,l++),r=new RegExp("^(?:"+s+")",u)),qi&&(r=new RegExp("^"+s+"$(?!\\s)",u)),Ki&&(e=i.lastIndex),n=zi.call(a?r:i,c),a?n?(n.input=n.input.slice(l),n[0]=n[0].slice(l),n.index=i.lastIndex,i.lastIndex+=n[0].length):i.lastIndex=0:Ki&&n&&(i.lastIndex=i.global?n.index+n[0].length:e),qi&&n&&n.length>1&&Xi.call(n[0],r,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(n[o]=void 0)})),n});var Qi=$i;Dt({target:"RegExp",proto:!0,forced:/./.exec!==Qi},{exec:Qi});var Ji=RegExp.prototype,Zi=Ji.toString,ta=i((function(){return"/a/b"!=Zi.call({source:"a",flags:"b"})})),ea="toString"!=Zi.name;(ta||ea)&&rt(RegExp.prototype,"toString",(function(){var t=_(this),e=String(t.source),r=t.flags;return"/"+e+"/"+String(void 0===r&&t instanceof RegExp&&!("flags"in Ji)?Oi.call(t):r)}),{unsafe:!0});var ra=Gt("species"),na=!i((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),oa="$0"==="a".replace(/./,"$0"),ia=Gt("replace"),aa=!!/./[ia]&&""===/./[ia]("a","$0"),ua=!i((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2!==r.length||"a"!==r[0]||"b"!==r[1]})),sa=wr.charAt,la=function(t,e,r){return e+(r?sa(t,e).length:1)},ca=function(t,e){var r=t.exec;if("function"==typeof r){var n=r.call(t,e);if("object"!=typeof n)throw TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==h(t))throw TypeError("RegExp#exec called on incompatible receiver");return Qi.call(t,e)},fa=Math.max,ha=Math.min,va=Math.floor,pa=/\$([$&'`]|\d\d?|<[^>]*>)/g,ga=/\$([$&'`]|\d\d?)/g;!function(t,e,r,n){var o=Gt(t),a=!i((function(){var e={};return e[o]=function(){return 7},7!=""[t](e)})),u=a&&!i((function(){var e=!1,r=/a/;return"split"===t&&((r={}).constructor={},r.constructor[ra]=function(){return r},r.flags="",r[o]=/./[o]),r.exec=function(){return e=!0,null},r[o](""),!e}));if(!a||!u||"replace"===t&&(!na||!oa||aa)||"split"===t&&!ua){var s=/./[o],l=r(o,""[t],(function(t,e,r,n,o){return e.exec===Qi?a&&!o?{done:!0,value:s.call(e,r,n)}:{done:!0,value:t.call(r,e,n)}:{done:!1}}),{REPLACE_KEEPS_$0:oa,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:aa}),c=l[0],f=l[1];rt(String.prototype,t,c),rt(RegExp.prototype,o,2==e?function(t,e){return f.call(t,this,e)}:function(t){return f.call(t,this)})}n&&I(RegExp.prototype[o],"sham",!0)}("replace",2,(function(t,e,r,n){var o=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,i=n.REPLACE_KEEPS_$0,a=o?"$":"$0";return[function(r,n){var o=g(this),i=null==r?void 0:r[t];return void 0!==i?i.call(r,o,n):e.call(String(o),r,n)},function(t,n){if(!o&&i||"string"==typeof n&&-1===n.indexOf(a)){var s=r(e,t,this,n);if(s.done)return s.value}var l=_(t),c=String(this),f="function"==typeof n;f||(n=String(n));var h=l.global;if(h){var v=l.unicode;l.lastIndex=0}for(var p=[];;){var g=ca(l,c);if(null===g)break;if(p.push(g),!h)break;""===String(g[0])&&(l.lastIndex=la(c,ct(l.lastIndex),v))}for(var d,y="",b=0,x=0;x<p.length;x++){g=p[x];for(var m=String(g[0]),T=fa(ha(st(g.index),c.length),0),A=[],E=1;E<g.length;E++)A.push(void 0===(d=g[E])?d:String(d));var S=g.groups;if(f){var w=[m].concat(A,T,c);void 0!==S&&w.push(S);var C=String(n.apply(void 0,w))}else C=u(m,c,T,A,S,n);T>=b&&(y+=c.slice(b,T)+C,b=T+m.length)}return y+c.slice(b)}];function u(t,r,n,o,i,a){var u=n+t.length,s=o.length,l=ga;return void 0!==i&&(i=Lt(i),l=pa),e.call(a,l,(function(e,a){var l;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return r.slice(0,n);case"'":return r.slice(u);case"<":l=i[a.slice(1,-1)];break;default:var c=+a;if(0===c)return e;if(c>s){var f=va(c/10);return 0===f?e:f<=s?void 0===o[f-1]?a.charAt(1):o[f-1]+a.charAt(1):e}l=o[c-1]}return void 0===l?"":l}))}}));var da=function(){"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))};function ya(t,e,r){var n=function(t,e,r){var n=new RegExp("\\b".concat(e," \\w+ (\\w+)"),"ig");t.replace(n,(function(t,e){return r[e]=0,t}))},o=function(t,e,r){var n=t.createShader(r);return t.shaderSource(n,e),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)?n:(console.log(t.getShaderInfoLog(n)),null)};this.uniform={},this.attribute={};var i=o(t,e,t.VERTEX_SHADER),a=o(t,r,t.FRAGMENT_SHADER);for(var u in this.id=t.createProgram(),t.attachShader(this.id,i),t.attachShader(this.id,a),t.linkProgram(this.id),t.getProgramParameter(this.id,t.LINK_STATUS)||console.log(t.getProgramInfoLog(this.id)),t.useProgram(this.id),n(e,"attribute",this.attribute),this.attribute)this.attribute[u]=t.getAttribLocation(this.id,u);for(var s in n(e,"uniform",this.uniform),n(r,"uniform",this.uniform),this.uniform)this.uniform[s]=t.getUniformLocation(this.id,s)}var ba=function(){function t(e){jr(this,t),this.canvas=e.canvas,this.width=e.width||640,this.height=e.height||480,this.gl=this.createGL(e.canvas),this.sourceTexture=this.gl.createTexture(),this.vertexBuffer=null,this.currentProgram=null,this.applied=!1,this.beautyParams={beauty:.5,brightness:.5,ruddy:.5}}return Br(t,[{key:"setRect",value:function(t,e){this.width=t,this.height=e}},{key:"apply",value:function(t){if(!this.vertexBuffer){var e=new Float32Array([-1,-1,0,1,1,-1,1,1,-1,1,0,0,-1,1,0,0,1,-1,1,1,1,1,1,0]);this.vertexBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,e,this.gl.STATIC_DRAW),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0)}this.gl.viewport(0,0,this.width,this.height),this.gl.bindTexture(this.gl.TEXTURE_2D,this.sourceTexture),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.applied?this.gl.texSubImage2D(this.gl.TEXTURE_2D,0,0,0,this.gl.RGB,this.gl.UNSIGNED_BYTE,t):(this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGB,this.gl.RGB,this.gl.UNSIGNED_BYTE,t),this.applied=!0),this.beauty()}},{key:"beauty",value:function(){var t=this.beautyParams,e=t.beauty,r=t.brightness,n=t.ruddy,o=2/this.width,i=2/this.height,a=this.compileBeautyShader();this.gl.uniform2f(a.uniform.singleStepOffset,o,i);var u=new Float32Array([1-.8*e,1-.6*e,.1+.45*n,.1+.45*n]);this.gl.uniform4fv(a.uniform.params,u),this.gl.uniform1f(a.uniform.brightness,.37*(-.5+r)),this.draw()}},{key:"draw",value:function(){this.gl.bindTexture(this.gl.TEXTURE_2D,this.sourceTexture),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.uniform1f(this.currentProgram.uniform.flipY,1),this.gl.drawArrays(this.gl.TRIANGLES,0,6)}},{key:"compileBeautyShader",value:function(){if(this.currentProgram)return this.currentProgram;this.currentProgram=new ya(this.gl,["precision highp float;","attribute vec2 pos;","attribute vec2 uv;","varying vec2 vUv;","uniform float flipY;","void main(void) {","vUv = uv;","gl_Position = vec4(pos.x, pos.y*flipY, 0.0, 1.);","}"].join("\n"),["precision highp float;","uniform vec2 singleStepOffset;","uniform sampler2D texture;","uniform vec4 params;","uniform float brightness;","varying vec2 vUv;","const highp vec3 W = vec3(0.299,0.587,0.114);","const mat3 saturateMatrix = mat3(1.1102,-0.0598,-0.061,-0.0774,1.0826,-0.1186,-0.0228,-0.0228,1.1772);","vec2 blurCoordinates[24];","float hardLight(float color){","if(color <= 0.5){","color = color * color * 2.0;","} else {","color = 1.0 - ((1.0 - color)*(1.0 - color) * 2.0);","}","return color;","}","void main(){","vec3 centralColor = texture2D(texture, vUv).rgb;","blurCoordinates[0] = vUv.xy + singleStepOffset * vec2(0.0, -10.0);","blurCoordinates[1] = vUv.xy + singleStepOffset * vec2(0.0, 10.0);","blurCoordinates[2] = vUv.xy + singleStepOffset * vec2(-10.0, 0.0);","blurCoordinates[3] = vUv.xy + singleStepOffset * vec2(10.0, 0.0);","blurCoordinates[4] = vUv.xy + singleStepOffset * vec2(5.0, -8.0);","blurCoordinates[5] = vUv.xy + singleStepOffset * vec2(5.0, 8.0);","blurCoordinates[6] = vUv.xy + singleStepOffset * vec2(-5.0, 8.0);","blurCoordinates[7] = vUv.xy + singleStepOffset * vec2(-5.0, -8.0);","blurCoordinates[8] = vUv.xy + singleStepOffset * vec2(8.0, -5.0);","blurCoordinates[9] = vUv.xy + singleStepOffset * vec2(8.0, 5.0);","blurCoordinates[10] = vUv.xy + singleStepOffset * vec2(-8.0, 5.0);","blurCoordinates[11] = vUv.xy + singleStepOffset * vec2(-8.0, -5.0);","blurCoordinates[12] = vUv.xy + singleStepOffset * vec2(0.0, -6.0);","blurCoordinates[13] = vUv.xy + singleStepOffset * vec2(0.0, 6.0);","blurCoordinates[14] = vUv.xy + singleStepOffset * vec2(6.0, 0.0);","blurCoordinates[15] = vUv.xy + singleStepOffset * vec2(-6.0, 0.0);","blurCoordinates[16] = vUv.xy + singleStepOffset * vec2(-4.0, -4.0);","blurCoordinates[17] = vUv.xy + singleStepOffset * vec2(-4.0, 4.0);","blurCoordinates[18] = vUv.xy + singleStepOffset * vec2(4.0, -4.0);","blurCoordinates[19] = vUv.xy + singleStepOffset * vec2(4.0, 4.0);","blurCoordinates[20] = vUv.xy + singleStepOffset * vec2(-2.0, -2.0);","blurCoordinates[21] = vUv.xy + singleStepOffset * vec2(-2.0, 2.0);","blurCoordinates[22] = vUv.xy + singleStepOffset * vec2(2.0, -2.0);","blurCoordinates[23] = vUv.xy + singleStepOffset * vec2(2.0, 2.0);","float sampleColor = centralColor.g * 22.0;","sampleColor += texture2D(texture, blurCoordinates[0]).g;","sampleColor += texture2D(texture, blurCoordinates[1]).g;","sampleColor += texture2D(texture, blurCoordinates[2]).g;","sampleColor += texture2D(texture, blurCoordinates[3]).g;","sampleColor += texture2D(texture, blurCoordinates[4]).g;","sampleColor += texture2D(texture, blurCoordinates[5]).g;","sampleColor += texture2D(texture, blurCoordinates[6]).g;","sampleColor += texture2D(texture, blurCoordinates[7]).g;","sampleColor += texture2D(texture, blurCoordinates[8]).g;","sampleColor += texture2D(texture, blurCoordinates[9]).g;","sampleColor += texture2D(texture, blurCoordinates[10]).g;","sampleColor += texture2D(texture, blurCoordinates[11]).g;","sampleColor += texture2D(texture, blurCoordinates[12]).g * 2.0;","sampleColor += texture2D(texture, blurCoordinates[13]).g * 2.0;","sampleColor += texture2D(texture, blurCoordinates[14]).g * 2.0;","sampleColor += texture2D(texture, blurCoordinates[15]).g * 2.0;","sampleColor += texture2D(texture, blurCoordinates[16]).g * 2.0;","sampleColor += texture2D(texture, blurCoordinates[17]).g * 2.0;","sampleColor += texture2D(texture, blurCoordinates[18]).g * 2.0;","sampleColor += texture2D(texture, blurCoordinates[19]).g * 2.0;","sampleColor += texture2D(texture, blurCoordinates[20]).g * 3.0;","sampleColor += texture2D(texture, blurCoordinates[21]).g * 3.0;","sampleColor += texture2D(texture, blurCoordinates[22]).g * 3.0;","sampleColor += texture2D(texture, blurCoordinates[23]).g * 3.0;","sampleColor = sampleColor / 62.0;","float highPass = centralColor.g - sampleColor + 0.5;","for(int i = 0; i < 5;i++){","highPass = hardLight(highPass);","}","float luminance = dot(centralColor, W);","float alpha = pow(luminance, params.r);","vec3 smoothColor = centralColor + (centralColor-vec3(highPass))*alpha*0.1;","smoothColor.r = clamp(pow(smoothColor.r, params.g),0.0,1.0);","smoothColor.g = clamp(pow(smoothColor.g, params.g),0.0,1.0);","smoothColor.b = clamp(pow(smoothColor.b, params.g),0.0,1.0);","vec3 screen = vec3(1.0) - (vec3(1.0)-smoothColor) * (vec3(1.0)-centralColor);","vec3 lighten = max(smoothColor, centralColor);","vec3 softLight = 2.0 * centralColor*smoothColor + centralColor*centralColor - 2.0 * centralColor*centralColor * smoothColor;","gl_FragColor = vec4(mix(centralColor, screen, alpha), 1.0);","gl_FragColor.rgb = mix(gl_FragColor.rgb, lighten, alpha);","gl_FragColor.rgb = mix(gl_FragColor.rgb, softLight, params.b);","vec3 satColor = gl_FragColor.rgb * saturateMatrix;","gl_FragColor.rgb = mix(gl_FragColor.rgb, satColor, params.a);","gl_FragColor.rgb = vec3(gl_FragColor.rgb + vec3(brightness));","}"].join("\n"));var t=Float32Array.BYTES_PER_ELEMENT,e=4*t;return this.gl.enableVertexAttribArray(this.currentProgram.attribute.pos),this.gl.vertexAttribPointer(this.currentProgram.attribute.pos,2,this.gl.FLOAT,!1,e,0),this.gl.enableVertexAttribArray(this.currentProgram.attribute.uv),this.gl.vertexAttribPointer(this.currentProgram.attribute.uv,2,this.gl.FLOAT,!1,e,2*t),this.currentProgram}},{key:"createGL",value:function(t){var e=t.getContext("webgl");if(e||t.getContext("experimental-webgl",{preserveDrawingBuffer:!0}),!e)throw"Couldn't get WebGL context";return e}},{key:"setBeautyParams",value:function(t){this.beautyParams=t}},{key:"reset",value:function(){this.applied=!1}}]),t}();Dt({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}});var xa=[].slice,ma=/MSIE .\./.test(Kt),Ta=function(t){return function(e,r){var n=arguments.length>2,o=n?xa.call(arguments,2):void 0;return t(n?function(){("function"==typeof e?e:Function(e)).apply(this,o)}:e,r)}};Dt({global:!0,bind:!0,forced:ma},{setTimeout:Ta(o.setTimeout),setInterval:Ta(o.setInterval)});var Aa=new(function(){function t(){jr(this,t),this.intervalMap_=new Map}return Br(t,[{key:"setInterval",value:function(t,e){var r=this,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=da(),i=Date.now(),a=i;this.intervalMap_.set(o,{rafId:null,timeoutId:null,onVisibilityChange:null});var u=function u(){if(n&&document.hidden){t();var s=setTimeout(u,e);r.setTimeoutId(o,s),i=Date.now(),a=i}else{(a=Date.now())-i>=e&&(i=a,t());var l=requestAnimationFrame(u);r.setRafId(o,l)}},s=requestAnimationFrame(u);if(this.setRafId(o,s),n){var l=function(){if(document.hidden){var t=Date.now()-i;if(t>=e)u();else{var n=setTimeout(u,e-t);r.setTimeoutId(o,n)}}};document.addEventListener("visibilitychange",l),this.setOnVisibilityChange(o,l)}return o}},{key:"clearInterval",value:function(t){if(this.intervalMap_.has(t)){var e=this.intervalMap_.get(t),r=e.rafId,n=e.timeoutId,o=e.onVisibilityChange;cancelAnimationFrame(r),clearTimeout(n),document.removeEventListener("visibilitychange",o),this.intervalMap_.delete(t)}}},{key:"setTimeoutId",value:function(t,e){if(this.intervalMap_.has(t)){var r=this.intervalMap_.get(t);r.timeoutId&&clearTimeout(r.timeoutId),r.timeoutId=e}}},{key:"setRafId",value:function(t,e){if(this.intervalMap_.has(t)){var r=this.intervalMap_.get(t);r.rafId&&cancelAnimationFrame(r.rafId),r.rafId=e}}},{key:"setOnVisibilityChange",value:function(t,e){this.intervalMap_.has(t)&&(this.intervalMap_.get(t).onVisibilityChange=e)}}]),t}()),Ea=function(){function e(){jr(this,e),this.video_=document.createElement("video"),this.video_.loop=!0,this.video_.autoplay=!0,this.canvas_=document.createElement("canvas"),this.filter=new ba({canvas:this.canvas_}),this.beautyParams={beauty:.5,brightness:.5,ruddy:.5}}return Br(e,[{key:"generateBeautyStream",value:function(t){var e=t.getVideoTrack(),r=this.generateBeautyTrack(e);return t.replaceTrack(r),t}},{key:"generateBeautyTrack",value:function(t){this.reset();var e=t.getSettings();this.filter.setRect(e.width,e.height),this.setRect(e.width,e.height);var r=new MediaStream;r.addTrack(t),this.video_.srcObject=r,this.video_.play();var n=this.generateVideoTrackFromCanvasCapture();return this.interval_=Aa.setInterval(this.render.bind(this),40),this.setBeautyTrack({originTrack:t,beautyTrack:n}),n}},{key:"setBeautyParam",value:function(t){var e=t.beauty,r=t.brightness,n=t.ruddy;e&&(this.beautyParams.beauty=e),r&&(this.beautyParams.brightness=r),n&&(this.beautyParams.ruddy=n),this.filter.setBeautyParams(this.beautyParams)}},{key:"setRect",value:function(t,e){var r=t||640,n=e||480;this.video_.height=n,this.video_.width=r,this.canvas_.height=n,this.canvas_.width=r}},{key:"render",value:function(){this.video_.readyState===this.video_.HAVE_ENOUGH_DATA&&this.filter.apply(this.video_)}},{key:"reset",value:function(){Aa.clearInterval(this.interval_),this.video_.pause(),this.filter.reset()}},{key:"destroy",value:function(){Aa.clearInterval(this.interval_),this.video_.pause(),this.video_.removeAttribute("srcObject"),this.video_.removeAttribute("src"),this.video_.load(),this.video_.width=0,this.video_.height=0,this.video_.remove(),delete this.video_,this.canvas_.width=0,this.canvas_.height=0,this.canvas_.remove(),delete this.canvas_}},{key:"generateVideoTrackFromCanvasCapture",value:function(t){return this.canvas_.captureStream(t).getVideoTracks()[0]}},{key:"setBeautyTrack",value:function(e){var r=e.originTrack,n=e.beautyTrack;t&&(t.beautyTrackMap||(t.beautyTrackMap=new Map),t.beautyTrackMap.set(n.id,{originTrack:r,beautyTrack:n,param:this.beautyParams,pluginInstance:this}))}}]),e}();return t&&(t.getRTCBeautyPlugin=function(){return new Ea}),Ea}));
